{% extends "base.html" %}
{% load i18n %}
{% load utils %}

{% block content %}
<h1>{{ result.scan.tag.release.description }}</h1>
<h2>{{ result.scan.nvr }} {% trans "compared to" %} {{ result.scan.base.nvr }} </h2>

<table class="summary">
    <tr>
        <td class="IS_A_BUG">
            Is a bug
        </td>
        <td class="NEEDS_INSPECTION">
            Needs Inspection
        </td>
        <td class="INFO">
            Info
        </td>
        <td class="WAIVED">
            Waived
        </td>
        <td class="PASSED">
            Passed
        </td>
        <td class="PREVIOUSLY_WAIVED">
            Previously Waived
        </td>
    </tr>
</table>

<h3>Newly introduced defects</h3>
{% if output_new %}
<table class="summary">
{% for five in output_new %}
  <tr>
    {% for group, result_group in five.items %}
        {% if result_group %}
            {{ result_group|result_group_display_new }}
        {% else %}
        <td class="PASSED">{{ group.name }}</td>
        {% endif %}
    {% endfor %}
  </tr>
{% endfor %}
</table>
{% endif %}

<h3>Fixed defects</h3>
{% if output_fixed %}
<table class="summary">
{% for five in output_fixed %}
  <tr>
    {% for group, result_group in five.items %}
        {% if result_group %}
            {{ result_group|result_group_display_fixed }}
        {% else %}
        <td class="PASSED">{{ group.name }}</td>
        {% endif %}
    {% endfor %}
  </tr>
{% endfor %}
</table>
{% endif %}

{% if logs %}
<div>
<ul>
{% for log, log_label in logs.iteritems %}
  <li><a href="{% url task/log result.scan.task.id log %}">{{ log_label }}</a> [<a href="{% url task/log result.scan.task.id log %}?format=raw">download</a>]</li>
{% endfor %}
</ul>
</div>
{% endif %}

{% if previous_result or next_result %}
<div id="result_links">
    {% if previous_result %}
    <span><a href="{% url waiving/result previous_result.id %}">Previous result</a></span>
    {% endif %}
    {% if previous_result and next_result %} | {% endif %}
    {% if next_result %}
    <span><a href="{% url waiving/result next_result.id %}">Next result</a></span>
    {% endif %}
</div>
{% endif %}

{% block waiver %}
{% endblock waiver %}

{% endblock content %}
