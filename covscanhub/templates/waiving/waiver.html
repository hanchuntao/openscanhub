{% extends "waiving/result.html" %}
{% load i18n %}

{% block waiver %}

<h2>{{ group.checker_group.name }}</h2>

<div id="defects">

{% for defect, events in defects.items %}
    <div class="{{ defect.get_state_display }}" id="{{ defect.id }}">
        <h3>Defect {{ defect.checker.name }}</h3>
    {{ checker.annotation }} [{{ defect.get_state_display }}]
        <ul>
    {% for event in events %}
            <li>
            {% if event.id == defect.key_event.id %}
                <b>{{ event.file_name }}:{{ event.line_and_column }}:{{ event.event }} -- {{ event.message }}</b>
            {% else %}
                {{ event.file_name }}:{{ event.line_and_column }}:{{ event.event }} -- {{ event.message }}
            {% endif %}
            </li>
    {% endfor %}
        </ul>
    </div>
{% endfor %}

</div>

{% if waivers %}
<div id="waivers">
{% for waiver in waivers %}
    <div class="waiver">
        User: {{ waiver.user }} </br>
        Date: {{ waiver.date|date:"Y-m-d H:i:s" }} </br>
        Status: {{ waiver.get_state_display }} </br>
        Message: {{ waiver.message }} </br>
    </div>
{% endfor %}
</div>
{% endif %}

<form action="{% url waiving/waiver result.id group.id %}" method="post">{% csrf_token %}
{{ form.as_p }}
<input type="submit" value="Submit" />
</form>

{% endblock %}
    