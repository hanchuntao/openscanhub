{% extends "waiving/result.html" %}
{% load i18n %}
{% load utils %}

{% block waiver %}

<h2>{{ group.checker_group.name }}</h2>

<div id="defects">

{% for defect in defects %}
    <div class="{{ defect.get_state_display }}">
        <h3>{{ defect.order }}. Defect {{ defect.checker.name }}</h3>
    {{ checker.annotation }} [{{ defect.get_state_display }}]
        <ul>
    {% for event in defect.events %}
            <li>
        {% if defect.key_event == forloop.counter0 %}
            <b>{{ event.file_name }}:{{ event|line_and_column }}:{{ event.event }} -- {{ event.message }}</b>
        {% else %}
            {{ event.file_name }}:{{ event|line_and_column }}:{{ event.event }} -- {{ event.message }}
        {% endif %}
            </li>
    {% endfor %}
        </ul>
    </div>
{% endfor %}

</div>

{% if display_waivers %}

    {% if waivers %}
<div id="waivers">
        {% for waiver in waivers %}
    <div class="waiver">
        User: {{ waiver.user }} </br>
        Date: {{ waiver.date|date:"Y-m-d H:i:s" }} </br>
        Status: {{ waiver.get_state_display }} </br>
        Message: <b>{{ waiver.message }}</b> </br>
    </div>
        {% endfor %}
</div>
    {% endif %}

{% endif %} {# display_waivers #}


{% if waivers_place %}
This group has been waived in run: <a href="{% url waiving/waiver waivers_result waivers_group %}">{{ waivers_place }}</a> </br>
{% endif %}


{% if display_form %}

<form action="{% url waiving/waiver result.id group.id %}" method="post">{% csrf_token %}
{{ form.as_p }}
<input type="submit" value="Submit" />
</form>

{% endif %}

{% endblock %}
    